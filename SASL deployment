# SASL_SSL

## Konfigurasi yang dilakukan untuk menerapkan keamanan SASL_SSL

### Konfigurasi server.properties
```
#Mengubah
listeners=SASL_SSL://:9092
advertised.listeners=SASL_SSL://node2.kafka:9092
listener.security.protocol.map=SASL_SSL:SASL_SSL
security.inter.broker.protocol=SASL_SSL

#Menambah
sasl.enabled.mechanisms=SCRAM-SHA-256
sasl.mechanism.inter.broker.protocol=SCRAM-SHA-256
listener.name.sasl_ssl.scram-sha-256.sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required serviceName="kafka" username="admins" password="admins";
super.user=User:admins
```

### konfigurasi producer.properties dan consumer.properties

```
#Pengubahan
security.protocol=SASL_SSL

#Tambahan 
sasl.mechanism=SCRAM-SHA-256
sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required serviceName="kafka" username="alices" password="bob";
```


### konfigurasi client-ssl.properties

```
#Mengubah
security.protocol=SASL_SSL

#Menambahkan
sasl.mechanism=SCRAM-SHA-256
sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required serviceName="kafka" username="admins" password="admins";
```

# ACLS

### membuat user alice dan bob
```
kafka-configs --bootstrap-server node1.kafka:9092 --command-config /etc/kafka/client-ssl.properties --alter --add-config 'SCRAM-SHA-256=[password=bob]' --entity-type users --entity-name alice
kafka-configs --bootstrap-server node1.kafka:9092 --command-config /etc/kafka/client-ssl.properties --alter --add-config 'SCRAM-SHA-256=[password=bob]' --entity-type users --entity-name bob
kafka-configs --bootstrap-server node1.kafka:9092 --command-config /etc/kafka/client-ssl.properties --alter --add-config 'SCRAM-SHA-256=[password=admins]' --entity-type users --entity-name admins
```

### membuat alice hanya bisa write data
```
kafka-acls --bootstrap-server node2.kafka:9092 --add --allow-principal User:alice --operation write --topic ssl-topic --command-config /etc/kafka/client-ssl.properties
```

### konfigurasi server.properties, client-ssl.properties, alice.properties,bob.properties,
```
#zookeeper.set.acl=true
authorizer.class.name=kafka.security.authorizer.AclAuthorizer
```


### produce dan consume menggunakan alice dan bob

```
kafka-console-producer --broker-list node1.kafka:9092 --topic ssl-topic --producer.config /etc/kafka/alice.properties
kafka-console-consumer --bootstrap-server node1.kafka:9092 --topic ssl-topic --from-beginning --consumer.config /etc/kafka/client-bob.properties
```
